(()=>{var _e=ke(),$e=new RegExp("^"+b(_e));function ke(){return self.registration?new URL(registration.scope).pathname.replace(/\/$/,""):location.pathname.replace(/\/[^\/]+$/,"")}function Le(t){return t.replace($e,"")}function b(t){if(typeof t=="string"){var e=/([\^\$\[\]\(\)\{\}\+\*\.\|\?])/g;return t.replace(e,"\\$1")}}var ae=class{constructor(e,r){this._resolve=e,this._reject=r}html(e,r){this.send(e,{type:"text/html",...r})}text(e,r){this.send(e,r)}json(e,r){this.send(JSON.stringify(e),{type:"application/json",...r})}blob(e,r={}){this._resolve(new Response(e,r))}send(e,{type:r="text/plain",...n}={}){[void 0,null].includes(e)||(e=new Blob([e],{type:r})),this.blob(e,n)}async fetch(e){if(typeof e=="string"){let r=await fetch(e),n=r.headers.get("Content-Type")??"application/octet-stream";this.send(await r.arrayBuffer(),{type:n})}else if(e instanceof Request)return fetch(e).then(this._resolve).catch(this._reject)}download(e,{filename:r="download",type:n="text/plain",...o}={}){let i={"Content-Disposition":`attachment; filename="${r}"`};this.send(e,{type:n,headers:i,...o})}redirect(e,r){r===void 0&&(r=e,e=302),r.match(/https?:\/\//)||(r=_e+r),this._resolve(Response.redirect(r,e))}sse({onClose:e}={}){let r,n,o,i;return o=new ReadableStream({cancel(){i=!0,be(e)},start:a=>{r=function(s){if(!i){let d=Ge(s),l=new TextEncoder().encode(d);a.enqueue(l)}},n=function(){a.close(),o=null,be(e)}}}),this._resolve(new Response(o,{headers:{"Content-Type":"text/event-stream; charset=utf-8","Transfer-Encoding":"chunked",Connection:"keep-alive"}})),{send:r,close:n}}};function Be(){let t="[a-zA-Z_][a-zA-Z_0-9]*",e=this,r="{",n="}",o="*",i="\\d",a="?",s="(",d=")",l="+",A=".";e.route_parser=function(S,m){let y={},H=new RegExp("("+b(S)+t+b(m)+")","g"),M=new RegExp(["(",b(S),t,b(m),"|",b(o),"|",b(i),"|",b(A),"|",b(a),"|",b(s),"|",b(d),"|",b(l),")"].join(""),"g"),B=new RegExp(b(S)+"("+t+")"+b(m),"g");return function(v){let I=[],Y=0,F=0;if(v=v.split(M).map(function(K,G,ue){return K===s?F++:K===d&&F--,[s,l,d,a,A,i].includes(K)?K:K===o?(I.push(Y++),"(.*?)"):K.match(H)?(I.push(K.replace(B,"$1")),"([^\\/]+)"):K}).join(""),F!==0)throw new Error(`Wayne: Unbalanced parentheses in an expression: ${v}`);return{re:v,names:I}}};let u=e.route_parser(r,n);e.parse=u,e.pick=function(S,m,y){let H,M;S instanceof Array?(H={},M=S,S.map(function(v){H[v]=v})):(M=Object.keys(S),H=S);let B=[];for(let v=M.length;v--;){let I=M[v],Y;if(I.match(/:\/\//)){let G=new URL(I);if(G.origin!==y)continue;Y=I.replace(G.origin,"")}else Y=I;let F=u(Y),K=m.match(new RegExp("^"+F.re+"$"));if(K){let G=K.slice(1),ue={};G.length&&F.names.forEach((Me,Ne)=>{ue[Me]=G[Ne]}),B.push({pattern:I,data:ue})}}return B}}function Fe(t){return["<!DOCTYPE html>","<html>","<head>",'<meta charset="UTF-8">',"<title>Wayne Service Worker</title>","</head>","<body>",...t,"</body>","</html>"].join(`
`)}function Ae(t){var e=Fe(["<h1>Wayne: 500 Server Error</h1>","<p>Service worker give 500 error</p>",`<p>${t.message||t}</p>`,`<pre>${t.stack||""}</pre>`]);return[e,{status:500,statusText:"500 Server Error"}]}function Ge({data:t,event:e,retry:r,id:n}){return Object.entries({event:e,id:n,data:t,retry:r}).filter(([,o])=>o).map(([o,i])=>`${o}: ${i}`).join(`
`)+`

`}function be(t,...e){typeof t=="function"&&t(...e)}function fe(t,e){if(t.length)return new Promise((r,n)=>{let o=0;(async function i(){let a=t[o];if(!a)return r();try{await e(a,function(){o++,i()})}catch(s){n(s)}})()})}var ie=class{constructor({filter:e=()=>!0}={}){this._er_handlers=[],this._middlewares=[],this._routes={},this._timeout=5*60*1e3,this._parser=new Be,self.addEventListener("fetch",r=>{if(e(r.request)===!1)return;let n=new Promise(async(o,i)=>{let a=r.request;try{let s=new ae(o,i);await fe(this._middlewares,function(m,y){return m(a,s,y)});let d=a.method,l=new URL(a.url),A=Le(l.pathname),u=l.origin,S=this._routes[d];if(S){let m=this._parser.pick(S,A,u);if(m.length){let[y]=m,H=[...this._middlewares,...S[y.pattern]];a.params=y.data,setTimeout(function(){i("Timeout Error")},this._timeout),await fe(H,(M,B)=>M(a,s,B));return}}if(r.request.cache==="only-if-cached"&&r.request.mode!=="same-origin")return;fetch(r.request).then(o).catch(i)}catch(s){this._handle_error(o,a,s)}});r.respondWith(n.catch(()=>{}))}),["GET","POST","DELETE","PATCH","PUT"].forEach(r=>{this[r.toLowerCase()]=this.method(r)})}_handle_error(e,r,n){let o=new ae(e);this._er_handlers.length?fe(this._er_handlers,function(i,a){i(n,r,o,a)},function(i){o.html(...Ae(i))}):o.html(...Ae(n))}use(...e){e.forEach(r=>{typeof r=="function"&&(r.length===4?this._er_handlers.push(r):r.length===3&&this._middlewares.push(r))})}method(e){return function(r,n){this._routes[e]||(this._routes[e]={});let o=this._routes[e];return o[r]||(o[r]=[]),o[r].push(n),this}}};var f=crypto,C=t=>t instanceof CryptoKey;var w=new TextEncoder,E=new TextDecoder,Ut=2**32;function R(...t){let e=t.reduce((o,{length:i})=>o+i,0),r=new Uint8Array(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}var xe=t=>{let e=t;typeof e=="string"&&(e=w.encode(e));let r=32768,n=[];for(let o=0;o<e.length;o+=r)n.push(String.fromCharCode.apply(null,e.subarray(o,o+r)));return btoa(n.join(""))},x=t=>xe(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Ce=t=>{let e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},O=t=>{let e=t;e instanceof Uint8Array&&(e=E.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Ce(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};var W=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},_=class extends W{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,r="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}},q=class extends W{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,r="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}},Z=class extends W{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}},p=class extends W{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}};var c=class extends W{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}},J=class extends W{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};var Q=class extends W{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}};var se=f.getRandomValues.bind(f);function D(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function ce(t,e){return t.name===e}function he(t){return parseInt(t.name.slice(4),10)}function Xe(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Ye(t,e){if(e.length&&!e.some(r=>t.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(e.length>2){let n=e.pop();r+=`one of ${e.join(", ")}, or ${n}.`}else e.length===2?r+=`one of ${e[0]} or ${e[1]}.`:r+=`${e[0]}.`;throw new TypeError(r)}}function Ke(t,e,...r){switch(e){case"HS256":case"HS384":case"HS512":{if(!ce(t.algorithm,"HMAC"))throw D("HMAC");let n=parseInt(e.slice(2),10);if(he(t.algorithm.hash)!==n)throw D(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!ce(t.algorithm,"RSASSA-PKCS1-v1_5"))throw D("RSASSA-PKCS1-v1_5");let n=parseInt(e.slice(2),10);if(he(t.algorithm.hash)!==n)throw D(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!ce(t.algorithm,"RSA-PSS"))throw D("RSA-PSS");let n=parseInt(e.slice(2),10);if(he(t.algorithm.hash)!==n)throw D(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(t.algorithm.name!=="Ed25519"&&t.algorithm.name!=="Ed448")throw D("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!ce(t.algorithm,"ECDSA"))throw D("ECDSA");let n=Xe(e);if(t.algorithm.namedCurve!==n)throw D(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Ye(t,r)}function Pe(t,e,...r){if(r.length>2){let n=r.pop();t+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?t+=`one of type ${r[0]} or ${r[1]}.`:t+=`of type ${r[0]}.`;return e==null?t+=` Received ${e}`:typeof e=="function"&&e.name?t+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor?.name&&(t+=` Received an instance of ${e.constructor.name}`),t}var P=(t,...e)=>Pe("Key must be ",t,...e);function le(t,e,...r){return Pe(`Key for the ${t} algorithm must be `,e,...r)}var me=t=>C(t),h=["CryptoKey"];var et=(...t)=>{let e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let r;for(let n of e){let o=Object.keys(n);if(!r||r.size===0){r=new Set(o);continue}for(let i of o){if(r.has(i))return!1;r.add(i)}}return!0},N=et;function tt(t){return typeof t=="object"&&t!==null}function g(t){if(!tt(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}var ee=(t,e)=>{if(t.startsWith("RS")||t.startsWith("PS")){let{modulusLength:r}=e.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}};var at=(t,e)=>{if(!(e instanceof Uint8Array)){if(!me(e))throw new TypeError(le(t,e,...h,"Uint8Array"));if(e.type!=="secret")throw new TypeError(`${h.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},it=(t,e,r)=>{if(!me(e))throw new TypeError(le(t,e,...h));if(e.type==="secret")throw new TypeError(`${h.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&e.type==="public")throw new TypeError(`${h.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&e.type==="public")throw new TypeError(`${h.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&r==="verify"&&e.type==="private")throw new TypeError(`${h.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&r==="encrypt"&&e.type==="private")throw new TypeError(`${h.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},st=(t,e,r)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?at(t,e):it(t,e,r)},V=st;function ht(t,e,r,n,o){if(o.crit!==void 0&&n?.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(a=>typeof a!="string"||a.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;r!==void 0?i=new Map([...Object.entries(r),...e.entries()]):i=e;for(let a of n.crit){if(!i.has(a))throw new p(`Extension Header Parameter "${a}" is not recognized`);if(o[a]===void 0)throw new t(`Extension Header Parameter "${a}" is missing`);if(i.get(a)&&n[a]===void 0)throw new t(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(n.crit)}var $=ht;var lt=(t,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(r=>typeof r!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)},we=lt;var wt=Symbol();function te(t,e){let r=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:t.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:e.namedCurve};case"EdDSA":return{name:e.name};default:throw new p(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}function re(t,e,r){if(C(e))return Ke(e,t,r),e;if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(P(e,...h));return f.subtle.importKey("raw",e,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(P(e,...h,"Uint8Array"))}var gt=async(t,e,r,n)=>{let o=await re(t,e,"verify");ee(t,o);let i=te(t,o.algorithm);try{return await f.subtle.verify(i,o,r,n)}catch{return!1}},Ie=gt;async function de(t,e,r){if(!g(t))throw new c("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new c('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new c("JWS Protected Header incorrect type");if(t.payload===void 0)throw new c("JWS Payload missing");if(typeof t.signature!="string")throw new c("JWS Signature missing or incorrect type");if(t.header!==void 0&&!g(t.header))throw new c("JWS Unprotected Header incorrect type");let n={};if(t.protected)try{let H=O(t.protected);n=JSON.parse(E.decode(H))}catch{throw new c("JWS Protected Header is invalid")}if(!N(n,t.header))throw new c("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let o={...n,...t.header},i=$(c,new Map([["b64",!0]]),r?.crit,n,o),a=!0;if(i.has("b64")&&(a=n.b64,typeof a!="boolean"))throw new c('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:s}=o;if(typeof s!="string"||!s)throw new c('JWS "alg" (Algorithm) Header Parameter missing or invalid');let d=r&&we("algorithms",r.algorithms);if(d&&!d.has(s))throw new Z('"alg" (Algorithm) Header Parameter value not allowed');if(a){if(typeof t.payload!="string")throw new c("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new c("JWS Payload must be a string or an Uint8Array instance");let l=!1;typeof e=="function"&&(e=await e(n,t),l=!0),V(s,e,"verify");let A=R(w.encode(t.protected??""),w.encode("."),typeof t.payload=="string"?w.encode(t.payload):t.payload),u;try{u=O(t.signature)}catch{throw new c("Failed to base64url decode the signature")}if(!await Ie(s,e,u,A))throw new Q;let m;if(a)try{m=O(t.payload)}catch{throw new c("Failed to base64url decode the payload")}else typeof t.payload=="string"?m=w.encode(t.payload):m=t.payload;let y={payload:m};return t.protected!==void 0&&(y.protectedHeader=n),t.header!==void 0&&(y.unprotectedHeader=t.header),l?{...y,key:e}:y}async function ge(t,e,r){if(t instanceof Uint8Array&&(t=E.decode(t)),typeof t!="string")throw new c("Compact JWS must be a string or Uint8Array");let{0:n,1:o,2:i,length:a}=t.split(".");if(a!==3)throw new c("Invalid Compact JWS");let s=await de({payload:o,protected:n,signature:i},e,r),d={payload:s.payload,protectedHeader:s.protectedHeader};return typeof e=="function"?{...d,key:s.key}:d}var T=t=>Math.floor(t.getTime()/1e3);var Et=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,k=t=>{let e=Et.exec(t);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");let r=parseFloat(e[2]),n=e[3].toLowerCase(),o;switch(n){case"sec":case"secs":case"second":case"seconds":case"s":o=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":o=Math.round(r*60);break;case"hour":case"hours":case"hr":case"hrs":case"h":o=Math.round(r*3600);break;case"day":case"days":case"d":o=Math.round(r*86400);break;case"week":case"weeks":case"w":o=Math.round(r*604800);break;default:o=Math.round(r*31557600);break}return e[1]==="-"||e[4]==="ago"?-o:o};var Re=t=>t.toLowerCase().replace(/^application\//,""),St=(t,e)=>typeof t=="string"?e.includes(t):Array.isArray(t)?e.some(Set.prototype.has.bind(new Set(t))):!1,pe=(t,e,r={})=>{let{typ:n}=r;if(n&&(typeof t.typ!="string"||Re(t.typ)!==Re(n)))throw new _('unexpected "typ" JWT header value',"typ","check_failed");let o;try{o=JSON.parse(E.decode(e))}catch{}if(!g(o))throw new J("JWT Claims Set must be a top-level JSON object");let{requiredClaims:i=[],issuer:a,subject:s,audience:d,maxTokenAge:l}=r,A=[...i];l!==void 0&&A.push("iat"),d!==void 0&&A.push("aud"),s!==void 0&&A.push("sub"),a!==void 0&&A.push("iss");for(let y of new Set(A.reverse()))if(!(y in o))throw new _(`missing required "${y}" claim`,y,"missing");if(a&&!(Array.isArray(a)?a:[a]).includes(o.iss))throw new _('unexpected "iss" claim value',"iss","check_failed");if(s&&o.sub!==s)throw new _('unexpected "sub" claim value',"sub","check_failed");if(d&&!St(o.aud,typeof d=="string"?[d]:d))throw new _('unexpected "aud" claim value',"aud","check_failed");let u;switch(typeof r.clockTolerance){case"string":u=k(r.clockTolerance);break;case"number":u=r.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}let{currentDate:S}=r,m=T(S||new Date);if((o.iat!==void 0||l)&&typeof o.iat!="number")throw new _('"iat" claim must be a number',"iat","invalid");if(o.nbf!==void 0){if(typeof o.nbf!="number")throw new _('"nbf" claim must be a number',"nbf","invalid");if(o.nbf>m+u)throw new _('"nbf" claim timestamp check failed',"nbf","check_failed")}if(o.exp!==void 0){if(typeof o.exp!="number")throw new _('"exp" claim must be a number',"exp","invalid");if(o.exp<=m-u)throw new q('"exp" claim timestamp check failed',"exp","check_failed")}if(l){let y=m-o.iat,H=typeof l=="number"?l:k(l);if(y-u>H)throw new q('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(y<0-u)throw new _('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return o};async function Ee(t,e,r){let n=await ge(t,e,r);if(n.protectedHeader.crit?.includes("b64")&&n.protectedHeader.b64===!1)throw new J("JWTs MUST NOT use unencoded payload");let i={payload:pe(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return typeof e=="function"?{...i,key:n.key}:i}var bt=async(t,e,r)=>{let n=await re(t,e,"sign");ee(t,n);let o=await f.subtle.sign(te(t,n.algorithm),n,r);return new Uint8Array(o)},Oe=bt;var z=class{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new c("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!N(this._protectedHeader,this._unprotectedHeader))throw new c("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader},o=$(c,new Map([["b64",!0]]),r?.crit,this._protectedHeader,n),i=!0;if(o.has("b64")&&(i=this._protectedHeader.b64,typeof i!="boolean"))throw new c('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:a}=n;if(typeof a!="string"||!a)throw new c('JWS "alg" (Algorithm) Header Parameter missing or invalid');V(a,e,"sign");let s=this._payload;i&&(s=w.encode(x(s)));let d;this._protectedHeader?d=w.encode(x(JSON.stringify(this._protectedHeader))):d=w.encode("");let l=R(d,w.encode("."),s),A=await Oe(a,e,l),u={signature:x(A),payload:""};return i&&(u.payload=E.decode(s)),this._unprotectedHeader&&(u.header=this._unprotectedHeader),this._protectedHeader&&(u.protected=E.decode(d)),u}};var ne=class{constructor(e){this._flattened=new z(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,r){let n=await this._flattened.sign(e,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}};function L(t,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${t} input`);return e}var X=class{constructor(e={}){if(!g(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return typeof e=="number"?this._payload={...this._payload,nbf:L("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:L("setNotBefore",T(e))}:this._payload={...this._payload,nbf:T(new Date)+k(e)},this}setExpirationTime(e){return typeof e=="number"?this._payload={...this._payload,exp:L("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:L("setExpirationTime",T(e))}:this._payload={...this._payload,exp:T(new Date)+k(e)},this}setIssuedAt(e){return typeof e>"u"?this._payload={...this._payload,iat:T(new Date)}:e instanceof Date?this._payload={...this._payload,iat:L("setIssuedAt",T(e))}:typeof e=="string"?this._payload={...this._payload,iat:L("setIssuedAt",T(new Date)+k(e))}:this._payload={...this._payload,iat:L("setIssuedAt",e)},this}};var oe=class extends X{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,r){let n=new ne(w.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new J("JWTs MUST NOT use unencoded payload");return n.sign(e,r)}};var Ht;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(Ht="jose/v5.3.0");var Ue=new TextEncoder().encode("cc7e0d44fd473002f1c42167459001140ec6389b7353f8088f4d9a95f2f596f2"),vt="HS256",Wt={sign:t=>new oe(t).setProtectedHeader({alg:vt}).setIssuedAt().setIssuer("https://FreeCodeCamp.org").setAudience("https://FreeCodeCamp.org").setExpirationTime("2h").sign(Ue),verify:async t=>{let{payload:e,protectedHeader:r}=await Ee(t,Ue,{issuer:"https://FreeCodeCamp.org",audience:"https://FreeCodeCamp.org"});return e}},De=Wt;var Se=new ie;Se.get("/api/hello/",(t,e)=>{e.text("Hello, Service Worker!")});Se.get("/api/hello",(t,e)=>{e.redirect(301,t.url+"/")});Se.post("/api/login",async(t,e)=>{let{username:r,password:n}=await t.json()??{};if(r==="demo"&&n==="demo"){let o=await De.sign({username:r});e.json({result:o})}else e.json({error:"Invalid username or password"})});})();
